!function(e,n){for(var r in n)e[r]=n[r]}(exports,function(e){var n={};function r(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=n,r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,n){if(1&n&&(e=r(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)r.d(t,o,function(n){return e[n]}.bind(null,o));return t},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="",r(r.s=1)}([function(e,n){e.exports=require("graphql")},function(e,n,r){r(0);r(2);var t=r(3),o=function(e){return e&&e.__esModule?e:{default:e}}(r(4)),i=r(5),a=r(6),l=r(7);const s="https://9hgny0cx0i.execute-api.us-east-2.amazonaws.com",u=(0,i.makeExecutableSchema)({typeDefs:a.schema,resolvers:l.resolvers,logger:console});n.graphqlHandler=function(e,n,r){return(0,t.graphqlLambda)({schema:u,tracing:!0})(e,n,function(e,n){n.headers["Access-Control-Allow-Origin"]="*",r(e,n)})},n.playgroundHandler=(0,o.default)({endpoint:process.env.REACT_APP_GRAPHQL_ENDPOINT?process.env.REACT_APP_GRAPHQL_ENDPOINT:s+"/dev/graphql"}),n.graphiqlHandler=(0,t.graphiqlLambda)({endpointURL:process.env.REACT_APP_GRAPHQL_ENDPOINT?process.env.REACT_APP_GRAPHQL_ENDPOINT:s+"/dev/graphql"})},function(e,n){e.exports=require("babel-polyfill")},function(e,n){e.exports=require("apollo-server-lambda")},function(e,n){e.exports=require("graphql-playground-middleware-lambda")},function(e,n){e.exports=require("graphql-tools")},function(e,n,r){r(0);Object.defineProperty(n,"__esModule",{value:!0});n.schema="\ntype Mutation {\n    # add credential for user\n    AddCredential(id : String!, mail: String!) : User!\n    registerUser(mail: String!) : Boolean!\n    confirmUser(id: String!) : Boolean!\n}\n\ntype Query {\n    #get perfil by id user \n    getPerfil(id: String!): Perfil\n\n    # listCredential by user\n    getAllCredential(id: String!): [Credential]\n}\n\n\ntype Perfil{\n    perfil_id:String!\n    name: String!\n    last_name: String!\n    phone: Int!\n    photo: String!\n\n}\n\ntype User{\n    id: String!\n    status: Boolean!\n    credentials: [Credential]\n    perfil: Perfil  \n} \n\ntype Credential {\n    mail : String!\n}\n\nschema {\n    query: Query\n    mutation: Mutation\n}"},function(e,n,r){r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.resolvers=void 0;var t=s(r(8)),o=l(r(9)),i=s(r(11)),a=l(r(12));function l(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n.default=e,n}function s(e){return e&&e.__esModule?e:{default:e}}function u(e){var n={TableName:"User",Key:{id:e}};return o.get(n).then(e=>(function(e){var n={TableName:"Perfil",Key:{perfil_id:e}};return o.get(n).then(e=>({perfil_id:e.perfil_id,name:e.name,last_name:e.last_name,phone:e.phone,photo:e.photo}),e=>console.log(e))})(e.perfil_id),e=>console.log(e))}function c(e){if(!function(e){return void 0===(0,i.default)({from:e},{from:{email:!0}})}(e))return!1;const n=(0,t.default)();var r={TableName:"Credential",Item:{mail:e,userId:n}};o.createItem(r).then(e=>console.log(e),e=>console.log(e));var l={TableName:"User",Item:{id:n,status:!1}};const s=o.createItem(l);return a.send(e,n),s.then(e=>(console.log(e),!0),e=>(console.log(e),!1))}n.resolvers={Query:{getPerfil:(e,n)=>u(n.id),getAllCredential:(e,n)=>(function(e){var n={TableName:"User",Key:{id:e}};return o.get(n).then(e=>{var n=[];for(const r of e.credentials)n.push({mail:r});return n},e=>console.log(e))})(n.id)},Mutation:{registerUser:(e,n)=>c(n.mail),confirmUser:(e,n)=>(function(e){var n={TableName:"User",Key:{id:e},UpdateExpression:"set #s = :s",ExpressionAttributeValues:{":s":!0},ExpressionAttributeNames:{"#s":"status"},ReturnValues:"UPDATED_NEW"};return o.updateItem(n).then(e=>(console.log(e),!0),e=>(console.log(e),!1))})(n.id)}}},function(e,n){e.exports=require("uuid/v4")},function(e,n,r){r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.scan=function(e){return new Promise((n,r)=>o.scan(e).promise().then(e=>n(e.Items)).catch(e=>r(e)))},n.get=function(e){return new Promise((n,r)=>o.get(e).promise().then(e=>n(e.Item)).catch(e=>r(e)))},n.createItem=function(e){return new Promise((n,r)=>o.put(e).promise().then(()=>n(e.Item)).catch(e=>r(e)))},n.updateItem=function(e,n){return new Promise((r,t)=>o.update(e).promise().then(()=>r(n)).catch(e=>t(e)))},n.deleteItem=function(e,n){return new Promise((r,t)=>o.delete(e).promise().then(()=>r(n)).catch(e=>t(e)))};var t=function(e){return e&&e.__esModule?e:{default:e}}(r(10));t.default.config.update({region:"us-east-2"});const o=new t.default.DynamoDB.DocumentClient},function(e,n){e.exports=require("aws-sdk")},function(e,n){e.exports=require("validate.js")},function(e,n,r){r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.send=function(e,n){var r={from:" Stack Bio  <awsfreetrial2018@gmail.com>",to:e,subject:"Please confirm your Email account",html:"Hello sr:"+n+",<br> Please Click on the link to verify your email.<br><a href=http://sometimesredsometimesblue.com/>Click here to verify</a>"};o.sendMail(r,function(e,n){e?console.log(e):console.log("Message sent: "+n.message)})};var t=r(13),o=(r(14),t.createTransport({host:"smtp.gmail.com",port:465,secure:!0,auth:{user:"user",pass:"pass"}}))},function(e,n){e.exports=require("nodemailer")},function(e,n){e.exports=require("xoauth2")}]));